<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.tailwindcss.com"></script>
    <title>Document</title>
</head>


<body class="min-h-screen bg-gray-50 ">
  <%- include('partials/navbars') %>
    <div class=" w-full bg-white rounded-lg shadow-md border border-gray-200">
        <h2 class="text-3xl font-bold text-green-600 text-center py-6">Tracked Medicines</h2>
        <div class="overflow-hidden">
            <!-- Make the table scrollable -->
            <div class="overflow-y-auto max-h-[calc(100vh-200px)]">
                <table class="w-full table-auto border-collapse">
                    <thead>
                        <tr class="bg-green-100 text-left">
                            <th class="px-4 py-3 text-sm font-medium text-gray-700 border-b">Name</th>
                            <th class="px-4 py-3 text-sm font-medium text-gray-700 border-b">Dosage</th>
                            <th class="px-4 py-3 text-sm font-medium text-gray-700 border-b">Frequency</th>
                            <th class="px-4 py-3 text-sm font-medium text-gray-700 border-b">Days Taken</th>
                            <th class="px-4 py-3 text-sm font-medium text-gray-700 border-b">Reminder</th>
                            <th class="px-4 py-3 text-sm font-medium text-gray-700 border-b">Options</th>
                            <th class="px-4 py-3 text-sm font-medium text-gray-700 border-b">Start</th>
                            <th class="px-4 py-3 text-sm font-medium text-gray-700 border-b">Action</th>
                        </tr>
                    </thead>
                    <tbody class="text-gray-800">
                        <!-- Sample Row -->
                        <% medecines.map((item) => { %>
                        <tr class="hover:bg-gray-100 border-t">
                            <td class="px-4 py-3"><span class="bg-gray-200 p-1 rounded-1"><%= item.Name %></span></td>
                            <td class="px-4 py-3"><span class="bg-gray-200 p-1 rounded-1"><%= item.Dosage %> mg</span></td>
                            <td class="px-4 py-3"><span class="bg-gray-200 p-1 rounded-1"><%= item.Frequency %> a day</span></td>
                            <td class="px-4 py-3"> <span class="bg-blue-200 p-1 rounded-1"><%= item.dayTaken %></span></td>
                            <% if ( item.Time > 0) { %>
                            <td class="px-4 py-3"> <span class="bg-pink-200 p-1 rounded-1"><%= item.Time %> Hours Left</span></td>
                            <% } else { %>
                            <td class="px-4 py-3"><span class="bg-pink-200 p-1 rounded-1">Take Now</span></td>
                            <% } %>
                            <td class="px-4 py-3">
                               
                            
                                <% trackers.map((ele) => { %>
                                    <% if ( ele.medicine == item.id ){ %>
                                        
                                        <p><%= ele.isTacken %></p>

                                        <form action="/medecine" method="post">
                                            <input name="id_medecine" type="text" value="<%= item.id %>" hidden>
        
                                            <select name ="isTacken" >
                                                <option name ="isTacken" value="Took">Took</option>
                                                <option name ="isTacken" value="Avoid">Avoid </option>
                                                
                                            </select>
                                            <button class=" bg-green-300" type="submit">confirm</button>
                                        </form>
                                        
                                    <% } %>
                                 
                                <% }); %>
                               
                               
                            </td>
                            <td class="px-4 py-3"><%= new Date(item.Start).toLocaleDateString() %></td>
                            <td class="px-4 py-3">
                                <button class="bg-yellow-400 text-white px-3 py-1 rounded-lg text-sm hover:bg-yellow-600">
                                    Update
                                </button>
                                <form action="/<%= item.id %>" method="POST" style="display:inline;">
                                    <input type="hidden" name="_method" value="DELETE">
                                    <button type="submit" class="bg-red-500 text-white px-3 py-1 rounded-lg text-sm hover:bg-red-600">
                                        Delete
                                    </button>
                                </form>
                            </td>
                        </tr>
                        <% }); %>
                    </tbody>
                </table>
            </div>
        </div>
        
    </div>
  <%- include('partials/footer') %>
  
</body>
</html>
